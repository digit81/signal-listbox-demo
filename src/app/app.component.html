<main>
  <h2>Edit vegetables:</h2>
  <app-vegetable-editor
    [vegetables]="availableVegetables()"
    (dataChange)="reloadData()"
  />

  <p>Select vegetables to inspect them:</p>

  @if(loading()) {
  <div class="info">
    <span class="loader"></span>
    <p>Loading available vegetables</p>
  </div>
  } @else {
  <jm-listbox
    #listbox
    [(value)]="selectedToppings"
    [orientation]="orientation()"
    (orientationChange)="logOrientationChange($event)"
    (valueChange)="updateQueryParams($event)"
  >
    @for (vegetable of availableVegetables(); track vegetable.id) {
    <jm-option [value]="vegetable">{{ vegetable.name }}</jm-option>
    } @empty {
    <div class="info wide">
      <p><em>Oh no!</em></p>
      <p>It seems there are no available vegetables.</p>
    </div>
    }
  </jm-listbox>
  @if (availableVegetables().length) {
  <button type="button" (click)="toggleOrientation()" class="btn">
    Change listbox orientation
  </button>
  }

  <h2>Your picks ({{ selectedToppings().length }} items):</h2>
  <div class="cards">
    @for (item of selectedToppings(); track item.id) {
    <app-card
      [title]="item.name"
      [description]="item.description"
      @myInsertRemoveTrigger
    />
    }
  </div>
  }
</main>

@if(listBox()) {
<p>Items selected in the Listbox Component:</p>
<pre class="codesnippet"><code>{{ listBox()?.value() | json }}</code></pre>
}

<router-outlet />
